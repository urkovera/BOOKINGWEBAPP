{% extends 'base.html' %}

{% block title %}RoomRak - Register{% endblock %}

{% block content %}
    <div id="registerPage" class="page">
        <div class="max-w-7xl mx-auto px-6 py-12 md:py-20">
            
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="mb-6 max-w-md mx-auto md:max-w-none">
                        {% for category, message in messages %}
                            <div class="p-4 mb-4 rounded-lg {% if category == 'danger' %}bg-red-100 text-red-700{% else %}bg-green-100 text-green-700{% endif %} fade-in">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            
            <div class="grid grid-cols-1 md:grid-cols-2 md:gap-20 items-center justify-items-center">
                
                <div class="bg-white rounded-3xl w-full max-w-md">
                    <h2 class="title-login-custom mb-8 text-3xl md:text-4xl">Create an account</h2> 
                    
                    <form method="POST" action="{{ url_for('main.register') }}" id="registerForm" class="w-full">
                        <div class="space-y-4 mb-6">
                            <input type="text" name="firstName" placeholder="First Name" class="input-register-default w-full" required>
                            <input type="text" name="lastName" placeholder="Last Name" class="input-register-default w-full" required>
                            <input type="text" name="studentId" placeholder="Student ID (11 digits)" class="input-register-default w-full" maxlength="11" pattern="[0-9]{11}" required>
                            <input type="email" 
                                   name="email" 
                                   placeholder="Email (@mail.kmutt.ac.th)" 
                                   class="input-register-default w-full" 
                                   pattern="[a-zA-Z0-9._%+-]+@mail\.kmutt\.ac\.th$"
                                   title="You must use your university email ending in @mail.kmutt.ac.th"
                                   required>
                            <input type="password" name="password" placeholder="Password (min 8 chars)" class="input-register-default w-full" minlength="8" required>
                            <input type="password" name="confirmPassword" placeholder="Confirm Password" class="input-register-default w-full" minlength="8" required>
                        </div>
                        
                        <button type="submit" class="btn-register-signup w-full text-white font-semibold text-lg hover:opacity-90 transition-colors mb-4">
                            SIGN UP
                        </button>
                        
                        <div>
                            <a href="{{ url_for('main.login') }}" class="btn-login-link w-full flex items-center justify-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                                </svg>
                                Login
                            </a>
                        </div>
                    </form>
                </div>

                <div class="relative hidden md:block w-full max-w-[613px] justify-self-end">
                    <div class="rounded-32 overflow-hidden fade-in shadow-xl"> 
                        <img src="{{ url_for('static', filename='images/image1.jpg') }}" 
                             alt="Building Kampus KMUTT" 
                             class="object-cover w-full h-auto md:h-[454px]">
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}